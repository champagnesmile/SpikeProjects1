<html><head>
  <title>Motor Control Challenge</title>
  <script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface/cdn/ServiceDock.js" charset="utf-8"></script>
  <script src="airtable_script.js" charset="utf-8"></script>
  <link rel="stylesheet" href="style.css" />
  <script language="JavaScript">
    var delta_change = 10; // how much to change the motor each click
    function update_airtable(elem) {
      // what motor are they changing?
      motor_num = document.getElementById("motor_num").value;
      // get the current value from airtable
      current_motor_value = parseInt(my_airtable.getValue('motor' + motor_num.toString()));
      console.log("Current motor" + motor_num.toString() + " value: " + current_motor_value);
      if (elem.name == "MINUS") {
        current_motor_value = Math.max(current_motor_value - delta_change, -100);
      } else if (elem.name == "PLUS") {
        current_motor_value = Math.min(current_motor_value + delta_change, 100);
      } else {
        alert("Sorry. Something went wrong.  Page isn't working.")
        return false;
      }
      // update airtable
      console.log("New motor" + motor_num.toString() + " value: " + current_motor_value);
      my_airtable.updateValue('motor' + motor_num.toString(), current_motor_value);
      return false;
    }
  </script>
  <style>
    td {
      padding: 10px;
      vertical-align: top;
    }
  </style>
</head>
<body type="remote">

  <!-- AIRTABLE SERVICE DOCK -->
  <div id="servicedock" style="float:right;">
    <service-airtable id="service_airtable" apikey = "" baseid = "" tablename = ""></service-airtable>
  </div>

  <img src="MotorControlChallenge.png" style="float:right; padding: 10px;" />

  <!-- WELCOME -->
  <h1>Motor Control Challenge</h1>
  <p>Pick your Breakout Room:
    <select name="motor_num" id="motor_num">
      <option value="01" selected>01</option>
      <option value="02">02</option>
      <option value="03">03</option>
      <option value="04">04</option>
      <option value="05">05</option>
      <option value="06">06</option>
      <option value="07">07</option>
    </select>
  </p>

  <p><b>Control the Robot:</b></p>

  <table border=1><tr>
    <td align=middle style="background-color: rgba(201, 76, 76, 0.3);">Counter-Clock Wise</td>
    <td align=middle style="background-color: rgba(76, 201, 76, 0.3);">Clock Wise</td>
  </tr><tr>
    <td align=middle style="background-color: rgba(201, 76, 76, 0.3);">
      <input type='button' name='MINUS' value="Add CCW Speed" onclick="return update_airtable(this);"></input>
    </td>
    <td align=middle style="background-color: rgba(76, 201, 76, 0.3);">
      <input type='button' name='PLUS' value="Add CW Speed" onclick="return update_airtable(this);"></input>
    </td>
  </tr></table>

  <p>Experimental demo created by:</p>

  <p>
    <a href="http://ceeo.tufts.edu" target=_blank><img src="TuftsCEEO.png"></a>
    <br><br>
    For more information, please visit: <a href="http://ceeo.tufts.edu" target=_blank>http://ceeo.tufts.edu</a>
  </p>

  <p>For other experimental projects from Tufts CEEO: <a href="http://ceeoinnovations.org" target=_blank>CEEO Innovations</a></p>

  <p style="font-size: x-small"><a href="MotorControlLocal.html" target=_blank>Robot Code</a></p>

</body>
</html>

<html>
	<head>
		<script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface/cdn/ServiceDock.js" charset="utf-8"></script>
		<script src="airtable_script.js" charset="utf-8"></script>
		<link rel="stylesheet" href="style.css" />
		<script language="JavaScript">
			function SPIKE_display_string(name_val, value_val) {
				if (my_SPIKE.isActive()) {
					// look up the current value stored in Airtable
					airtable_string = String(my_airtable.getValue(vals["name_val"]));
					display_string = airtable_string.substring(0,20); // limit to 20 chars
					if (display_string.trim().length > 0) {
						//console.log("- SPIKE_display_string: write '" + display_string + "'");
						var hub = my_SPIKE.PrimeHub().light_matrix.write(display_string);
					} else {
						//console.log("- SPIKE_display_string: turning off lightmatrix");
						var hub = my_SPIKE.PrimeHub().light_matrix.off();
					}
				} else {
					init_spike_error("in SPIKE_display_string");
				}
			}
		</script>
	</head>
<body type=local>

	<div id="servicedock" style="float:right;">
		<!-- AIRTABLE SERVICE -->
	  <service-airtable id="service_airtable" apikey = "" baseid = "" tablename = ""></service-airtable>
		<!-- SPIKE Prime Service -->
		<service-spike id="service_spike"></service-spike>
	</div>

	<!-- WELCOME -->
  <p>
    <h1>Hello SPIKE</h1>
    <br />
    <img src="logo.png" width="100px" height="100px">
  </p>

	<p style="color: red"><b><em>NOTE:</em> This code isn't for you.  It's run locally and interacts with the robot via USB.</b></p>

	<p><a href="index.html">Return to the main Hello SPIKE Page</a></p>

	<hr>

	<p>If you think you should still be here:</p>

  <div type="airtable-check" compare="equal" action="run-slot">
	    <input type=text id="name_val" value="action">
	    <input type=text id="value_val" value="Spin Left">
	    <input type=text id="action_val" value="0">
	</div>

  <div type="airtable-check" compare="equal" action="run-slot">
	    <input type=text id="name_val" value="action">
	    <input type=text id="value_val" value="Spin Right">
	    <input type=text id="action_val" value="1">
	</div>

  <div type="airtable-check" compare="equal" action="stop-slot">
	    <input type=text id="name_val" value="action">
	    <input type=text id="value_val" value="Stop">
	</div>

	<div type="airtable-check" compare="not-equal" action="run-js">
		<input type=text id="name_val" value="text_input">
		<input type=text id="value_val" value=" ">
		<input type=text id="action_val" value="SPIKE_display_string">
	</div>

</body>
</html>
